# Fetch unemployment rates for setup
setup_series <- fetch_bls_series(c(
"LNS14000000",  # Total unemployment
"LNS14000006",  # Black
"LNS14027660",  # HS grad
"LNS14027662",  # College
"LNS14000001",  # Men
"LNS14000093"   # Age 45-54
))
unrate <- setup_series %>%
rename(
full_unrate = LNS14000000,
black_unrate = LNS14000006,
hs_grad = LNS14027660,
all_college = LNS14027662,
men_unrate = LNS14000001,
age_45_54 = LNS14000093
) %>%
mutate(across(-date, ~ .x / 100)) %>%
filter(year(date) >= 1994)
# ---- Color choices ----
col_young <- "#004c6d"
col_grads <- "#ff8361"
# ---- Load + prep ----
compare <- read_csv("data/ny_fed_data/unemployed-Table 1.csv") %>%
clean_names() %>%
select(date:college_graduates) %>%
mutate(
date = mdy(date),
young_workers     = young_workers / 100,
recent_graduates  = recent_graduates / 100,
all_workers       = all_workers / 100
) %>%
arrange(date)
# ---- Models (fit pre-2020) ----
model_young <- lm(log(young_workers) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
model_grads <- lm(log(recent_graduates) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
compare <- compare %>%
mutate(
predict_young = exp(predict(model_young, newdata = compare)),
predict_grads = exp(predict(model_grads, newdata = compare))
)
# ---- Long format for 4-line plot ----
plot_df <- compare %>%
transmute(
date,
young_actual = young_workers,
young_proj   = predict_young,
grads_actual = recent_graduates,
grads_proj   = predict_grads
) %>%
pivot_longer(-date, names_to = "series", values_to = "value") %>%
mutate(
group = case_when(
str_detect(series, "^young_") ~ "All other non-college graduates (ages 22-27)",
str_detect(series, "^grads_") ~ "Recent college graduates (ages 22-27)"
),
type = case_when(
str_detect(series, "_actual$") ~ "Actual",
str_detect(series, "_proj$")   ~ "Projection"
)
)
# ---- Zoom Plot ----
fig_4 <- plot_df %>%
filter(year(date) >= 2021) %>%
ggplot(aes(x = date, y = value, color = group, linetype = type)) +
geom_line(aes(alpha = type), linewidth = 1.2) +
scale_color_manual(values = c(
"All other non-college graduates (ages 22-27)" = col_young,
"Recent college graduates (ages 22-27)" = col_grads
)) +
scale_linetype_manual(values = c("Actual" = "solid", "Projection" = "dotted")) +
scale_alpha_manual(values = c("Actual" = 1, "Projection" = 0.8), guide = "none") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
labs(
title = "Figure 4: Recent College Graduates Have Higher Unemployment\nThan Predicted From Slowing Labor Market",
subtitle = "Unemployment rates (ages 22-27): Actual vs. trend predicted by overall unemployment rate (1990-2019)",
x = NULL,
y = NULL,
color = NULL,
linetype = NULL,
caption = "Source: NY Fed, Author's Calculations, Mike Konczal"
) +
my_style
ggsave(
filename = file.path(plot_dir, "figure-4.png"),
plot = fig_4,
width = plot_width,
height = plot_height,
dpi = plot_dpi
)
fig_4
# ---- Color choices ----
col_young <- "#004c6d"
col_grads <- "#ff8361"
# ---- Load + prep ----
compare <- read_csv("data/ny_fed_data/unemployed-Table 1.csv") %>%
clean_names() %>%
select(date:college_graduates) %>%
mutate(
date = mdy(date),
young_workers     = young_workers / 100,
recent_graduates  = recent_graduates / 100,
all_workers       = all_workers / 100
) %>%
arrange(date)
# ---- Models (fit pre-2020) ----
model_young <- lm(log(young_workers) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
model_grads <- lm(log(recent_graduates) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
compare <- compare %>%
mutate(
predict_young = exp(predict(model_young, newdata = compare)),
predict_grads = exp(predict(model_grads, newdata = compare))
)
# ---- Long format for 4-line plot ----
plot_df <- compare %>%
transmute(
date,
young_actual = young_workers,
young_proj   = predict_young,
grads_actual = recent_graduates,
grads_proj   = predict_grads
) %>%
pivot_longer(-date, names_to = "series", values_to = "value") %>%
mutate(
group = case_when(
str_detect(series, "^young_") ~ "All other non-college graduates (ages 22-27)",
str_detect(series, "^grads_") ~ "Recent college graduates (ages 22-27)"
),
type = case_when(
str_detect(series, "_actual$") ~ "Actual",
str_detect(series, "_proj$")   ~ "Projection"
)
)
# ---- Zoom Plot ----
fig_4 <- plot_df %>%
filter(year(date) >= 2017) %>%
ggplot(aes(x = date, y = value, color = group, linetype = type)) +
geom_line(aes(alpha = type), linewidth = 1.2) +
scale_color_manual(values = c(
"All other non-college graduates (ages 22-27)" = col_young,
"Recent college graduates (ages 22-27)" = col_grads
)) +
scale_linetype_manual(values = c("Actual" = "solid", "Projection" = "dotted")) +
scale_alpha_manual(values = c("Actual" = 1, "Projection" = 0.8), guide = "none") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
labs(
title = "Figure 4: Recent College Graduates Have Higher Unemployment\nThan Predicted From Slowing Labor Market",
subtitle = "Unemployment rates (ages 22-27): Actual vs. trend predicted by overall unemployment rate (1990-2019)",
x = NULL,
y = NULL,
color = NULL,
linetype = NULL,
caption = "Source: NY Fed, Author's Calculations, Mike Konczal"
) +
my_style
ggsave(
filename = file.path(plot_dir, "figure-4.png"),
plot = fig_4,
width = plot_width,
height = plot_height,
dpi = plot_dpi
)
fig_4
fig_4
plot_df %>%
#filter(year(date) >= 2017) %>%
ggplot(aes(x = date, y = value, color = group, linetype = type)) +
geom_line(aes(alpha = type), linewidth = 1.2) +
scale_color_manual(values = c(
"All other non-college graduates (ages 22-27)" = col_young,
"Recent college graduates (ages 22-27)" = col_grads
)) +
scale_linetype_manual(values = c("Actual" = "solid", "Projection" = "dotted")) +
scale_alpha_manual(values = c("Actual" = 1, "Projection" = 0.8), guide = "none") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
labs(
title = "Figure 4: Recent College Graduates Have Higher Unemployment\nThan Predicted From Slowing Labor Market",
subtitle = "Unemployment rates (ages 22-27): Actual vs. trend predicted by overall unemployment rate (1990-2019)",
x = NULL,
y = NULL,
color = NULL,
linetype = NULL,
caption = "Source: NY Fed, Author's Calculations, Mike Konczal"
) +
my_style
ggsave(
filename = file.path(plot_dir, "figure-4.png"),
plot = fig_4,
width = plot_width,
height = plot_height,
dpi = plot_dpi
)
plot_df %>%
#filter(year(date) >= 2017) %>%
ggplot(aes(x = date, y = value, color = group, linetype = type)) +
geom_line(aes(alpha = type), linewidth = 1.2) +
scale_color_manual(values = c(
"All other non-college graduates (ages 22-27)" = col_young,
"Recent college graduates (ages 22-27)" = col_grads
)) +
scale_linetype_manual(values = c("Actual" = "solid", "Projection" = "dotted")) +
scale_alpha_manual(values = c("Actual" = 1, "Projection" = 0.8), guide = "none") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
labs(
title = "Figure 4: Recent College Graduates Have Higher Unemployment\nThan Predicted From Slowing Labor Market",
subtitle = "Unemployment rates (ages 22-27): Actual vs. trend predicted by overall unemployment rate (1990-2019)",
x = NULL,
y = NULL,
color = NULL,
linetype = NULL,
caption = "Source: NY Fed, Author's Calculations, Mike Konczal"
) +
my_style
ggsave(
filename = file.path(plot_dir, "figure-4.png"),
plot = fig_4,
width = plot_width,
height = plot_height,
dpi = plot_dpi
)
#| echo: false
library(tidyverse)
library(lubridate)
library(broom)
library(janitor)
library(slider)
library(scales)
library(blsR)
library(zoo)
bls_set_key(Sys.getenv("BLS_KEY"))
my_style <- list(
theme_classic(base_size = 13),
theme(
axis.line = element_line(linewidth = 0.25),
panel.grid.major.y = element_line(color = "gray85", linewidth = 0.25),
panel.grid.major.x = element_line(color = "gray85", linewidth = 0.25),
panel.grid.minor = element_blank(),
plot.title = element_text(face = "bold"),
plot.title.position = "plot",
legend.position = "top",
legend.title = element_blank()
),
coord_cartesian(clip = "off")
)
# Output settings for blog-sized figures.
plot_dir <- "graphics"
dir.create(plot_dir, showWarnings = FALSE, recursive = TRUE)
plot_width <- 6.0
plot_height <- 4.2
plot_dpi <- 225
# Helper function to fetch BLS series with interpolation for missing months
fetch_bls_series <- function(series_ids, start_year = 1994, end_year = 2025) {
raw <- get_n_series_table(
series_ids,
start_year = start_year,
end_year = end_year,
api_key = bls_get_key()
)
df <- raw %>%
mutate(
month_num = as.integer(gsub("M", "", period)),
date = as.Date(paste0(year, "-", month_num, "-01"))
) %>%
select(date, all_of(series_ids)) %>%
mutate(across(-date, as.numeric))
# Interpolate missing months (e.g., October 2025)
date_range <- seq(min(df$date), max(df$date), by = "month")
df %>%
right_join(tibble(date = date_range), by = "date") %>%
arrange(date) %>%
mutate(across(-date, ~ zoo::na.approx(.x, na.rm = FALSE)))
}
# Fetch unemployment rates for setup
setup_series <- fetch_bls_series(c(
"LNS14000000",  # Total unemployment
"LNS14000006",  # Black
"LNS14027660",  # HS grad
"LNS14027662",  # College
"LNS14000001",  # Men
"LNS14000093"   # Age 45-54
))
unrate <- setup_series %>%
rename(
full_unrate = LNS14000000,
black_unrate = LNS14000006,
hs_grad = LNS14027660,
all_college = LNS14027662,
men_unrate = LNS14000001,
age_45_54 = LNS14000093
) %>%
mutate(across(-date, ~ .x / 100)) %>%
filter(year(date) >= 1994)
# ---- Color choices ----
col_young <- "#004c6d"
col_grads <- "#ff8361"
# ---- Load + prep ----
compare <- read_csv("data/ny_fed_data/unemployed-Table 1.csv") %>%
clean_names() %>%
select(date:college_graduates) %>%
mutate(
date = mdy(date),
young_workers     = young_workers / 100,
recent_graduates  = recent_graduates / 100,
all_workers       = all_workers / 100
) %>%
arrange(date)
# ---- Models (fit pre-2020) ----
model_young <- lm(log(young_workers) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
model_grads <- lm(log(recent_graduates) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
compare <- compare %>%
mutate(
predict_young = exp(predict(model_young, newdata = compare)),
predict_grads = exp(predict(model_grads, newdata = compare))
)
# ---- Long format for 4-line plot ----
plot_df <- compare %>%
transmute(
date,
young_actual = young_workers,
young_proj   = predict_young,
grads_actual = recent_graduates,
grads_proj   = predict_grads
) %>%
pivot_longer(-date, names_to = "series", values_to = "value") %>%
mutate(
group = case_when(
str_detect(series, "^young_") ~ "All other non-college graduates (ages 22-27)",
str_detect(series, "^grads_") ~ "Recent college graduates (ages 22-27)"
),
type = case_when(
str_detect(series, "_actual$") ~ "Actual",
str_detect(series, "_proj$")   ~ "Projection"
)
)
# ---- Zoom Plot ----
fig_4 <- plot_df %>%
filter(year(date) >= 2021) %>%
ggplot(aes(x = date, y = value, color = group, linetype = type)) +
geom_line(aes(alpha = type), linewidth = 1.2) +
scale_color_manual(values = c(
"All other non-college graduates (ages 22-27)" = col_young,
"Recent college graduates (ages 22-27)" = col_grads
)) +
scale_linetype_manual(values = c("Actual" = "solid", "Projection" = "dotted")) +
scale_alpha_manual(values = c("Actual" = 1, "Projection" = 0.8), guide = "none") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
labs(
title = "Figure 4: Recent College Graduates Have Higher Unemployment\nThan Predicted From Slowing Labor Market",
subtitle = "Unemployment rates (ages 22-27): Actual vs. trend predicted by overall unemployment rate (1990-2019)",
x = NULL,
y = NULL,
color = NULL,
linetype = NULL,
caption = "Source: NY Fed, Author's Calculations, Mike Konczal"
) +
my_style
ggsave(
filename = file.path(plot_dir, "figure-4.png"),
plot = fig_4,
width = plot_width,
height = plot_height,
dpi = plot_dpi
)
fig_4
fig_4
# ---- Color choices ----
col_young <- "#004c6d"
col_grads <- "#ff8361"
# ---- Load + prep ----
compare <- read_csv("data/ny_fed_data/unemployed-Table 1.csv") %>%
clean_names() %>%
select(date:college_graduates) %>%
mutate(
date = mdy(date),
young_workers     = young_workers / 100,
recent_graduates  = recent_graduates / 100,
all_workers       = all_workers / 100
) %>%
arrange(date)
# ---- Models (fit pre-2020) ----
model_young <- lm(log(young_workers) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
model_grads <- lm(log(recent_graduates) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
compare <- compare %>%
mutate(
predict_young = exp(predict(model_young, newdata = compare)),
predict_grads = exp(predict(model_grads, newdata = compare))
)
# ---- Long format for 4-line plot ----
plot_df <- compare %>%
transmute(
date,
young_actual = young_workers,
young_proj   = predict_young,
grads_actual = recent_graduates,
grads_proj   = predict_grads
) %>%
pivot_longer(-date, names_to = "series", values_to = "value") %>%
mutate(
group = case_when(
str_detect(series, "^young_") ~ "All other non-college graduates (ages 22-27)",
str_detect(series, "^grads_") ~ "Recent college graduates (ages 22-27)"
),
type = case_when(
str_detect(series, "_actual$") ~ "Actual",
str_detect(series, "_proj$")   ~ "Projection"
)
)
# ---- Zoom Plot ----
fig_4 <- plot_df %>%
filter(year(date) >= 2019) %>%
ggplot(aes(x = date, y = value, color = group, linetype = type)) +
geom_line(aes(alpha = type), linewidth = 1.2) +
scale_color_manual(values = c(
"All other non-college graduates (ages 22-27)" = col_young,
"Recent college graduates (ages 22-27)" = col_grads
)) +
scale_linetype_manual(values = c("Actual" = "solid", "Projection" = "dotted")) +
scale_alpha_manual(values = c("Actual" = 1, "Projection" = 0.8), guide = "none") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
labs(
title = "Figure 4: Recent College Graduates Have Higher Unemployment\nThan Predicted From Slowing Labor Market",
subtitle = "Unemployment rates (ages 22-27): Actual vs. trend predicted by overall unemployment rate (1990-2019)",
x = NULL,
y = NULL,
color = NULL,
linetype = NULL,
caption = "Source: NY Fed, Author's Calculations, Mike Konczal"
) +
my_style
ggsave(
filename = file.path(plot_dir, "figure-4.png"),
plot = fig_4,
width = plot_width,
height = plot_height,
dpi = plot_dpi
)
fig_4
fig_4
# ---- Color choices ----
col_young <- "#004c6d"
col_grads <- "#ff8361"
# ---- Load + prep ----
compare <- read_csv("data/ny_fed_data/unemployed-Table 1.csv") %>%
clean_names() %>%
select(date:college_graduates) %>%
mutate(
date = mdy(date),
young_workers     = young_workers / 100,
recent_graduates  = recent_graduates / 100,
all_workers       = all_workers / 100
) %>%
arrange(date)
# ---- Models (fit pre-2020) ----
model_young <- lm(log(young_workers) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
model_grads <- lm(log(recent_graduates) ~ log(all_workers), data = compare %>% filter(year(date) < 2020))
compare <- compare %>%
mutate(
predict_young = exp(predict(model_young, newdata = compare)),
predict_grads = exp(predict(model_grads, newdata = compare))
)
# ---- Long format for 4-line plot ----
plot_df <- compare %>%
transmute(
date,
young_actual = young_workers,
young_proj   = predict_young,
grads_actual = recent_graduates,
grads_proj   = predict_grads
) %>%
pivot_longer(-date, names_to = "series", values_to = "value") %>%
mutate(
group = case_when(
str_detect(series, "^young_") ~ "All other non-college graduates (ages 22-27)",
str_detect(series, "^grads_") ~ "Recent college graduates (ages 22-27)"
),
type = case_when(
str_detect(series, "_actual$") ~ "Actual",
str_detect(series, "_proj$")   ~ "Projection"
)
)
# ---- Zoom Plot ----
fig_4 <- plot_df %>%
filter(year(date) >= 2017) %>%
ggplot(aes(x = date, y = value, color = group, linetype = type)) +
geom_line(aes(alpha = type), linewidth = 1.2) +
scale_color_manual(values = c(
"All other non-college graduates (ages 22-27)" = col_young,
"Recent college graduates (ages 22-27)" = col_grads
)) +
scale_linetype_manual(values = c("Actual" = "solid", "Projection" = "dotted")) +
scale_alpha_manual(values = c("Actual" = 1, "Projection" = 0.8), guide = "none") +
scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
labs(
title = "Figure 4: Recent College Graduates Have Higher Unemployment\nThan Predicted From Slowing Labor Market",
subtitle = "Unemployment rates (ages 22-27): Actual vs. trend predicted by overall unemployment rate (1990-2019)",
x = NULL,
y = NULL,
color = NULL,
linetype = NULL,
caption = "Source: NY Fed, Author's Calculations, Mike Konczal"
) +
my_style
ggsave(
filename = file.path(plot_dir, "figure-4.png"),
plot = fig_4,
width = plot_width,
height = plot_height,
dpi = plot_dpi
)
fig_4
fig_4
